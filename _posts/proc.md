---
title: linux proc
tag: linux
thumbnail: https://pic.kylinn.cloud/uploads/big/084654c05e4b973fc7262061c999eb96.jpg
---
~~以PID为1的文件夹为例~~
## proc里的文件
- **`cmdline`** 启动进程的命令
- **`cwd`** 一个指向运行目录的符号链接
- **`enviroment`** 环境变量列表
- **`exe`** 指向启动当前进程的可执行文件的符号链接
- **`mem`** 当前进程所占用的内存空间，由open、read和lseek等系统调用使用，不能被用户读取
- **`limits`** 当前进程所使用的每一个受限资源的软限制、硬限制和管理单元
- **`maps`** 当前进程关联到的每个**可执行文件**和**库文件**在内存中的映射区域及其访问权限所组成的列表
- **`root`** 指向当前进程运行根目录的符号链接, 可以用chroot命令使每个进程运行于独立的根目录
- **`stat`**  当前进程的**状态信息**，包含一系统**格式化后**的数据列，可读性差
- **`statm`**  当前进程占用内存的状态信息，通常以“页面”（page）表示；
- **`status`** 与stat所提供信息类似，但可读性较好
## proc里的进程文件夹
- **`fd`** 当前进程打开的每一个文件的文件描述符，都会作为一个指向文件的符号链接，放到这个文件夹里
- **`task`** 存放当前进程所运行的每一个线程的相关信息的目录，每个线程的相关信息文件均保存在一个由线程号（tid）命名的目录中
其他可以参考**man**

## maps的结构
这个文件的结构如下：

![](https://pic.kylinn.cloud/uploads/big/89d1cd30a43b1472151e89f44980a1e3.png)

根据 **`man`** 的说法是这样的：

|address|perms|offset|dev|inode|pathname|
|--|--|--|--|--|--|

- 如果pathname为空，即为匿名映射，否则为有名映射
  
随机看一个进程的maps：
```bash
cd /proc/$PID
sudo cat maps
```
```bash
00400000-01457000 r-xp 00000000 fc:02 148690                             /usr/bin/caddy
01457000-0232c000 r--p 01057000 fc:02 148690                             /usr/bin/caddy
0232c000-023bd000 rw-p 01f2c000 fc:02 148690                             /usr/bin/caddy
023bd000-023ff000 rw-p 00000000 00:00 0
c000000000-c001200000 rw-p 00000000 00:00 0
c001200000-c004000000 rw-p 00000000 00:00 0
7fd1292c5000-7fd12b9f6000 rw-p 00000000 00:00 0
7fd12b9f6000-7fd13bb76000 ---p 00000000 00:00 0
7fd13bb76000-7fd13bb77000 rw-p 00000000 00:00 0
7fd13bb77000-7fd14da26000 ---p 00000000 00:00 0
7fd14da26000-7fd14da27000 rw-p 00000000 00:00 0
7fd14da27000-7fd14fdfc000 ---p 00000000 00:00 0
7fd14fdfc000-7fd14fdfd000 rw-p 00000000 00:00 0
7fd14fdfd000-7fd150276000 ---p 00000000 00:00 0
7fd150276000-7fd150277000 rw-p 00000000 00:00 0
7fd150277000-7fd1502f6000 ---p 00000000 00:00 0
7fd1502f6000-7fd150356000 rw-p 00000000 00:00 0
7fffa387b000-7fffa389c000 rw-p 00000000 00:00 0                          [stack]
7fffa38de000-7fffa38e1000 r--p 00000000 00:00 0                          [vvar]
7fffa38e1000-7fffa38e2000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 --xp 00000000 00:00 0                  [vsyscall]
```
以第一行为例，从左到右依次是`vm_start`，`vm_end`、、、
